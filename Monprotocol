// Function to fetch and complete quests
async function fetchAndCompleteQuests() {
  alert("Mon Protocol Auto Claimer â€“ Happy Airdrop\nSubscribe: https://t.me/RPC_Hubs");

  let questCompleted = false;
  
  try {
    // Fetch the list of quests from the API
    const response = await fetch('https://app.monprotocol.ai/api/trpc/quests.quests');
    const data = await response.json();
    
    // Get the list of quests
    const quests = data.result.data.quests;
    
    // Loop through each quest
    for (const quest of quests) {
      // If the quest is not yet completed
      if (quest.user_quest_completion === null) {
        // Complete the quest
        await completeQuest(quest.data.id);
        console.log("Completed quest:", quest.data.id);
        questCompleted = true;
      }
    }
  } catch (error) {
    console.error("Error fetching and completing quests:", error);
  }

  // If no quests were completed, show an alert
  if (!questCompleted) {
    alert("All quests are already completed.");
  }
}

// Function to complete a specific quest
async function completeQuest(questId) {
  try {
    const response = await fetch('https://app.monprotocol.ai/api/trpc/quests.setQuestCompletion', {
      method: 'POST',
      headers: { 
        'Content-Type': 'application/json',
        'Cookie': ''  // You might need to add a valid cookie here if required
      },
      body: JSON.stringify({ json: questId }),
    });
    
    console.log(response);
  } catch (error) {
    console.error("Error completing quest:", error);
  }
}

// Call the main function to fetch and complete quests
fetchAndCompleteQuests();
